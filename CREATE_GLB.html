    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Three.js glTF Loader</title>
        <style>
            body { margin: 0; background: #cccccc;}
            canvas { display: block; }

            /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì •ì˜ */
            #customizeButton, #saveButton, #imageButton, #resetButton, #loadButton, #draftsSaveButton, #draftsLoadButton{
                position: absolute;
                top: 20px;
                padding: 5px 20px;
                background-color: #000000;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                z-index: 1000;
            }

            #languageToggleButton {
                position: absolute;
                top: 20px;
                padding: 5px 8px;
                background-color: #000000;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                z-index: 1000;
            }

            #customizeButton { left: 20px; }
            #saveButton { left: 130px; }
            #imageButton { left: 240px; }
            #resetButton { left: 360px; }
            #loadButton { left: 475px; }
            #languageToggleButton {left: 580px;}
            #draftsSaveButton {left: 630px;}
            #draftsLoadButton {left: 760px;}
            #customizeButton:hover, #saveButton:hover, #imageButton:hover #loadButton:hover #draftsSaveButton:hover #draftsLoadButton:hover {
                background-color: hsl(0, 62%, 43%);
            }
            #materialPickerContainer { top: 120px; }
            /* ìƒ‰ìƒ ì„ íƒ ìŠ¤íƒ€ì¼ ì •ì˜ */
            #colorPickerContainer, #materialPickerContainer {
                position: absolute;
                top: 60px;
                left: 20px;
                padding: 10px;
                background-color: white;
                border: 1px solid #ccc;
                border-radius: 5px;
                display: none;
                z-index: 1000;
            }
            #materialPickerContainer {
                position: absolute;
                top: 120px;
                left: 20px;
                padding: 10px;
                background-color: white;
                border: 1px solid #ccc;
                border-radius: 5px;
                display: none;
                z-index: 1000;
            }


            #fileInput {
                display: none;
            }
            
            #moveControls {
                position: fixed; /* ë³€ê²½ */
                top: 10px; /* ìƒë‹¨ ì—¬ë°± */
                right: 10px; /* ì˜¤ë¥¸ìª½ ì—¬ë°± */
                width: 150px;
                height: 150px;
                border: 1px solid #ccc;
                border-radius: 50%;
                background-color: #000000;
                display: block;
                z-index: 1000;
                overflow: hidden;
                box-shadow: 0 0 10px rgba(0,0,0,0.3);
                align-items: center;
                justify-content: center;
                padding: 0;
                margin-top: 0;
            }

            #moveButtonControl {
                width: 30px;
                height: 30px;
                background-color: #007BFF;
                border-radius: 50%;
                cursor: pointer;
                position: absolute;
                top: 60px;
                left: 60px;
            }

            /* ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
            #modelSelectContainer {
                position: absolute;
                top: 20px;
                left: 1350px;
                background-color: black;
                padding: 4px;
                border-radius: 5px;
                border: 1px solid black;
                color: white;
                z-index: 1000;
            }

        </style>
    </head>
    <body>
        <button id="customizeButton">Color ğŸ¨</button>
        <button id="saveButton">Save ğŸ’¾</button>
        <button id="imageButton">Image ğŸ–¼ï¸</button>
        <button id="resetButton">Reset ğŸ”„</button>
        <button id="loadButton">Load ğŸ“</button>
        <button id="languageToggleButton">â“</button>
        <button id="draftsSaveButton">drafts Save</button>
        <button id="draftsLoadButton">drafts Load</button>
        </button>

        <input type="file" id="fileInput" accept="image/*">
        <input type="file" id="gltfInput" accept=".gltf" style="display: none;">
        <input type="file" id="glbInput" accept=".glb" style="display: none;">

        <div id="colorPickerContainer">
            <label for="colorPicker">Choose color:</label>
            <input type="color" id="colorPicker" value="#ffffff">
        </div>
    <!-- ì¬ì§ˆ ì„ íƒ ë“œë¡­ë‹¤ìš´ -->
    <div id="materialPickerContainer">
        <label for="materialPicker">Choose material:</label>
        <select id="materialPicker">
            <option value="cotton">Cotton</option>
            <option value="polyester">Polyester</option>
            <option value="wool">Wool</option>
            <option value="linen">Linen</option>
            <option value="denim">Denim</option>
            <option value="nylon">Nylon</option>
        </select>
    </div>
        <div id="moveControls">
            <div id="moveButtonControl"></div>
        </div>

        <!-- ë¼ë””ì˜¤ ë²„íŠ¼ìœ¼ë¡œ ëª¨ë¸ ì„ íƒ -->
        <div id="modelSelectContainer">
            <label>
                <input type="radio" name="modelSelect" value="model1" checked> Model 1
            </label>
            <label>
                <input type="radio" name="modelSelect" value="model2"> Model 2
            </label>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/loaders/GLTFLoader.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/exporters/GLTFExporter.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
        
        <script>
            let scene, camera, renderer, model, model2, controls;
            let loadedTexture = null;
            let mouseX = 0, mouseY = 0;
            let initialPosition1, initialPosition2;
            let selectedModel = 'model1';  // ê¸°ë³¸ ì„ íƒì€ ëª¨ë¸ 1
            let moveButtonControl = document.getElementById('moveButtonControl');
            let moveControls = document.getElementById('moveControls');
            let isDragging = false;
            let currentTexture1 = null; // ëª¨ë¸1 ì €ì¥
            let currentTexture2 = null; // ëª¨ë¸2 ì €ì¥
            let currentTextureOffset = { x: 0, y: 0 }; // í˜„ì¬ ì˜¤í”„ì…‹ ì €ì¥
            let initialOffset = { x: 0, y: 0 }; 
            let initialButtonPosition = { left: 60, top: 60 };
            // ìƒˆë¡œìš´ ë²„íŠ¼ê³¼ í…ìŠ¤íŠ¸ì— ëŒ€í•œ ë³€ìˆ˜
            let languageToggleButton = document.getElementById('languageToggleButton');
            let isKorean = false;  // í˜„ì¬ ìƒíƒœê°€ ì˜ì–´ì¸ì§€ë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜
            const windowHalfX = window.innerWidth / 2;
            const windowHalfY = window.innerHeight / 2;

            document.getElementById('customizeButton').addEventListener('click', function() {
                const colorPickerContainer = document.getElementById('colorPickerContainer');
                const materialPickerContainer = document.getElementById('materialPickerContainer'); 
                colorPickerContainer.style.display = colorPickerContainer.style.display === 'none' ? 'block' : 'none';
                materialPickerContainer.style.display = materialPickerContainer.style.display === 'none' ? 'block' : 'none'; 
            });

            document.getElementById('colorPicker').addEventListener('input', function(event) {
                const colorValue = event.target.value;
                
                // modelê³¼ model2ì— ëŒ€í•´ ëª¨ë‘ ìƒ‰ìƒ ì„¤ì •
                [model, model2].forEach(targetModel => {
                    if (targetModel) {
                        targetModel.traverse(function(child) {
                            if (child.isMesh) {
                                child.material.color.set(colorValue);
                                child.material.needsUpdate = true;
                            }
                        });
                    }
                });
            });
            document.getElementById('materialPicker').addEventListener('change', function(event) {
        // ì²« ë²ˆì§¸ ëª¨ë¸ì— ëŒ€í•œ ì¬ì§ˆ ë³€ê²½
        if (model) {
            model.traverse(function(child) {
                if (child.isMesh) {
                    // ê¸°ì¡´ ì¬ì§ˆì„ ë³µì‚¬
                    const existingMaterial = child.material;

                    // ì„ íƒí•œ ì¬ì§ˆì— ë§ëŠ” ìƒˆë¡œìš´ ì¬ì§ˆ ìƒì„±
                    const newMaterial = new THREE.MeshStandardMaterial({
                        color: existingMaterial.color,
                        map: existingMaterial.map,  // ê¸°ì¡´ í…ìŠ¤ì²˜ ìœ ì§€
                        roughness: 0.5,
                        metalness: 0.5
                    });

                    // ì„ íƒëœ ì¬ì§ˆì— ë”°ë¼ roughnessì™€ metalness ì¡°ì •
                    switch (event.target.value) {
                        case 'cotton':
                            newMaterial.roughness = 0.8;
                            newMaterial.metalness = 0.1;
                            break;
                        case 'polyester':
                            newMaterial.roughness = 0.5;
                            newMaterial.metalness = 0.3;
                            break;
                        case 'wool':
                            newMaterial.roughness = 1.0;
                            newMaterial.metalness = 0.1;
                            break;
                        case 'linen':
                            newMaterial.roughness = 0.7;
                            newMaterial.metalness = 0.1;
                            break;
                        case 'denim':
                            newMaterial.roughness = 0.6;
                            newMaterial.metalness = 0.2;
                            break;
                        case 'nylon':
                            newMaterial.roughness = 0.2;
                            newMaterial.metalness = 0.3;
                            break;
                    }

                    // ìƒˆë¡œìš´ ì¬ì§ˆì„ ëª¨ë¸ì— ì ìš©
                    child.material = newMaterial;
                    child.material.needsUpdate = true; // ì¬ì§ˆ ì—…ë°ì´íŠ¸
                }
            });
        }

        // ë‘ ë²ˆì§¸ ëª¨ë¸ì— ëŒ€í•œ ì¬ì§ˆ ë³€ê²½
        if (model2) {
            model2.traverse(function(child) {
                if (child.isMesh) {
                    // ê¸°ì¡´ ì¬ì§ˆì„ ë³µì‚¬
                    const existingMaterial = child.material;

                    // ì„ íƒí•œ ì¬ì§ˆì— ë§ëŠ” ìƒˆë¡œìš´ ì¬ì§ˆ ìƒì„±
                    const newMaterial = new THREE.MeshStandardMaterial({
                        color: existingMaterial.color,
                        map: existingMaterial.map,  // ê¸°ì¡´ í…ìŠ¤ì²˜ ìœ ì§€
                        roughness: 0.5,
                        metalness: 0.5
                    });

                    // ì„ íƒëœ ì¬ì§ˆì— ë”°ë¼ roughnessì™€ metalness ì¡°ì •
                    switch (event.target.value) {
                        case 'cotton':
                                newMaterial.roughness = 0.8;
                                newMaterial.metalness = 0.0;
                                break;
                            case 'polyester':
                                newMaterial.roughness = 0.3;
                                newMaterial.metalness = 0.1;
                                break;
                            case 'wool':
                                newMaterial.roughness = 0.9;
                                newMaterial.metalness = 0.0;
                                break;
                            case 'silk':
                                newMaterial.roughness = 0.1;
                                newMaterial.metalness = 0.2;
                                break;
                            case 'denim':
                                newMaterial.roughness = 0.6;
                                newMaterial.metalness = 0.0;
                                break;
                            case 'linen':
                                newMaterial.roughness = 0.7;
                                newMaterial.metalness = 0.0;
                                break;
                            case 'nylon':
                                newMaterial.roughness = 0.2;
                                newMaterial.metalness = 0.1;
                                break;
                    }

                    // ìƒˆë¡œìš´ ì¬ì§ˆì„ ëª¨ë¸ì— ì ìš©
                    child.material = newMaterial;
                    child.material.needsUpdate = true; // ì¬ì§ˆ ì—…ë°ì´íŠ¸
                }
            });
        }
    });
            document.getElementById('saveButton').addEventListener('click', function() {
                saveAsPNG();
                saveModelToCookie();
            });

            function saveAsPNG(){
                renderer.render(scene, camera);
                
                // Three.js ìº”ë²„ìŠ¤ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì–»ìŒ
                const imgData = renderer.domElement.toDataURL('image/png');

                // ìƒˆë¡œìš´ ìº”ë²„ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì´ë¯¸ì§€ë¥¼ ê·¸ë¦´ ì¤€ë¹„
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                const img = new Image();
                img.src = imgData;
                
                img.onload = function() {
                    canvas.width = img.width;  
                    canvas.height = img.height;

                    // ìº”ë²„ìŠ¤ì— ì›ë³¸ ì´ë¯¸ì§€ ê·¸ë¦¬ê¸°
                    ctx.drawImage(img, 0, 0);

                    // ì›Œí„°ë§ˆí¬ ì´ë¯¸ì§€ ë¡œë“œ
                    const watermark = new Image();
                    watermark.src = 'custy.png';  // ì›Œí„°ë§ˆí¬ ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œ
                    
                    watermark.onload = function() {
                        const wmWidth = 200;  // ì›Œí„°ë§ˆí¬ ì´ë¯¸ì§€ ë„ˆë¹„
                        const wmHeight = 50;  // ì›Œí„°ë§ˆí¬ ì´ë¯¸ì§€ ë†’ì´
                        const spacing = 100;  // ì›Œí„°ë§ˆí¬ ê°„ê²© (ì›Œí„°ë§ˆí¬ë¼ë¦¬ì˜ ê°„ê²©)
                        ctx.globalAlpha = 0.2;  // ì›Œí„°ë§ˆí¬ íˆ¬ëª…ë„ ì„¤ì •

                        // ëŒ€ê°ì„ ìœ¼ë¡œ ë°˜ë³µì ì¸ ì›Œí„°ë§ˆí¬ ë°°ì¹˜
                        for (let y = -wmHeight; y < canvas.height; y += wmHeight + spacing) {
                            for (let x = y - 3000; x < canvas.width; x += wmWidth + spacing) { // X ì¢Œí‘œë¥¼ ì™¼ìª½ìœ¼ë¡œ ë§ì´ ì˜®ê¹€ (-400)
                                ctx.save();
                                ctx.translate(x + wmWidth / 2, y + wmHeight / 2);
                                ctx.rotate(-Math.PI / 4);  // ëŒ€ê°ì„  íšŒì „
                                ctx.drawImage(watermark, -wmWidth / 2, -wmHeight / 2, wmWidth, wmHeight);
                                ctx.restore();
                            }
                        }

                        // ìµœì¢… ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ
                        const finalImage = canvas.toDataURL('image/png');
                        const link = document.createElement('a');
                        link.href = finalImage;
                        link.download = 'screenshot_with_watermark.png';
                        link.click();
                    };
                };
            }

            document.getElementById('imageButton').addEventListener('click', function() {
                document.getElementById('fileInput').click();
            });

            document.getElementById('fileInput').addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.src = e.target.result;

                        img.onload = function() {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');

                            const originalImageWidth = img.width;
                            const originalImageHeight = img.height;
                            const padding = 200;
                            const newImageWidth = originalImageWidth / 6;
                            const newImageHeight = originalImageHeight / 6;

                            canvas.width = newImageWidth + padding * 2;
                            canvas.height = newImageHeight + padding * 2;

                            ctx.fillStyle = 'white';
                            ctx.fillRect(0, 0, canvas.width, canvas.height);

                            ctx.save();
                            ctx.translate(padding + newImageWidth / -1, padding + 125);
                            ctx.rotate(Math.PI);
                            ctx.drawImage(img, -newImageWidth, -newImageHeight / 1, newImageWidth, newImageHeight);
                            ctx.restore();

                            const dataURL = canvas.toDataURL('image/png');

                            // ë‘ ëª¨ë¸ì— ì´ë¯¸ì§€ ì¶”ê°€
                            [model, model2].forEach((targetModel, index) => {
                                if (targetModel) {
                                    const textureLoader = new THREE.TextureLoader();
                                    textureLoader.load(dataURL, function(texture) {
                                        texture.wrapS = THREE.ClampToEdgeWrapping;
                                        texture.wrapT = THREE.ClampToEdgeWrapping;
                                        texture.needsUpdate = true;

                                        targetModel.traverse(function(child) {
                                            if (child.isMesh) {
                                                const newMaterial = new THREE.MeshStandardMaterial({
                                                    map: texture,
                                                    color: child.material.color,
                                                    roughness: 0.8,
                                                    metalness: 0.1,
                                                });

                                                child.material = newMaterial;
                                                child.material.needsUpdate = true;

                                                // í˜„ì¬ í…ìŠ¤ì²˜ ì €ì¥
                                                if (index === 0) {
                                                    currentTexture1 = texture; // model1ì— ëŒ€í•´ í…ìŠ¤ì²˜ ì €ì¥
                                                } 
                                                else if (index === 1) {
                                                    currentTexture2 = texture; // model2ì— ëŒ€í•´ í…ìŠ¤ì²˜ ì €ì¥
                                                }
                                            }
                                        });
                                    });
                                }
                            });
                        };
                    };
                    reader.readAsDataURL(file);
                }
            });

            document.getElementById('resetButton').addEventListener('click', function() {
                // ë‘ ëª¨ë¸ì„ ëª¨ë‘ ì´ˆê¸°í™”í•˜ê³  ì”¬ì—ì„œ ì œê±°
                [model, model2].forEach((targetModel, index) => {
                    if (targetModel) {
                        // ì”¬ì—ì„œ ëª¨ë¸ ì œê±°
                        scene.remove(targetModel);
                        
                        // ëª¨ë¸ì„ ë‹¤ì‹œ ë¡œë“œ
                        const loader = new THREE.GLTFLoader();
                        const modelPath = index === 0 ? 't_shirt/scene2.glb' : 't_shirt/scene4.glb'; // indexë¡œ ëª¨ë¸ ê²½ë¡œ ì„ íƒ
                        
                        loader.load(modelPath, function (gltf) {
                            const newModel = gltf.scene;
                            newModel.scale.set(6, 6, 6);
                            const box = new THREE.Box3().setFromObject(newModel);
                            const center = box.getCenter(new THREE.Vector3());
                            newModel.position.sub(center);
                            newModel.position.x = index === 0 ? -2.5 : 2.5; // ìœ„ì¹˜ ì„¤ì •
                            newModel.position.y = 0;
                            if (index === 1) {
                                newModel.rotation.y = Math.PI; // ëª¨ë¸ 2ëŠ” yì¶• íšŒì „
                            }
                            scene.add(newModel);
                            
                            // ê¸°ì¡´ ëª¨ë¸ ì°¸ì¡° ì—…ë°ì´íŠ¸
                            if (index === 0) {
                                model = newModel; // model1 ì—…ë°ì´íŠ¸
                            } else {
                                model2 = newModel; // model2 ì—…ë°ì´íŠ¸
                            }
                        }, undefined, function (error) {
                            console.error(error);
                        });
                    }
                });
            });

                    // ë²„íŠ¼ í´ë¦­ ì‹œ í…ìŠ¤íŠ¸ ë³€ê²½
            languageToggleButton.addEventListener('click', function() {
                if (isKorean) {
                    // í•œêµ­ì–´ì—ì„œ ì˜ì–´ë¡œ ë³€ê²½
                    languageToggleButton.textContent = 'â“';
                    document.getElementById('customizeButton').textContent = 'Color ğŸ¨';
                    document.getElementById('saveButton').textContent = 'Save ğŸ’¾';
                    document.getElementById('imageButton').textContent = 'Image ğŸ–¼ï¸';
                    document.getElementById('resetButton').textContent = 'Reset ğŸ”„';
                    document.getElementById('loadButton').textContent = 'Load ğŸ“';
                    document.getElementById('draftsSaveButton').textContent ='drafts Save';
                    document.getElementById('draftsLoadButton').textContent ='drafts Load';

                    // í•œê¸€ ìŠ¤íƒ€ì¼ë¡œ ë²„íŠ¼ í¬ê¸°/ìœ„ì¹˜ ì¡°ì •
                    adjustButtonStyle('en');
                } else {
                    // ì˜ì–´ì—ì„œ í•œêµ­ì–´ë¡œ ë³€ê²½
                    languageToggleButton.textContent = 'ã‰ ';
                    document.getElementById('customizeButton').textContent = 'ë§ì¶¤ ì„¤ì • ğŸ¨';
                    document.getElementById('saveButton').textContent = 'íŒŒì¼ ì €ì¥ ğŸ’¾';
                    document.getElementById('imageButton').textContent = 'ì´ë¯¸ì§€ ì¶”ê°€ ğŸ–¼ï¸';
                    document.getElementById('resetButton').textContent = 'ë¦¬ì…‹ ğŸ”„';
                    document.getElementById('loadButton').textContent = 'íŒŒì¼ ë¡œë“œ ğŸ“';
                    document.getElementById('draftsSaveButton').textContent ='ëª¨ë¸ ì„ì‹œì €ì¥';
                    document.getElementById('draftsLoadButton').textContent ='ëª¨ë¸ ë¶ˆëŸ¬ì˜¤ê¸°';
                    // í•œê¸€ ìŠ¤íƒ€ì¼ë¡œ ë²„íŠ¼ í¬ê¸°/ìœ„ì¹˜ ì¡°ì •
                    adjustButtonStyle('kr');
                }
                // ìƒíƒœ ì „í™˜
                isKorean = !isKorean;
            });
            function adjustButtonStyle(language) {
                    const buttonStyleChanges = {
                        'en': {
                            'languageToggleButton': {
                                'padding': '5px 8px',
                                'left': '580px',
                            },
                            'customizeButton': {
                                'padding': '5px 20px',
                                'left': '20px',
                            },
                            'saveButton': {
                                'padding': '5px 20px',
                                'left': '130px',
                            },
                            'imageButton': {
                                'padding': '5px 20px',
                                'left': '240px',
                            },
                            'resetButton': {
                                'padding': '5px 20px',
                                'left': '360px',
                            },
                            'loadButton': {
                                'padding': '5px 20px',
                                'left': '475px',
                            },
                            'draftsSaveButton': {
                                'padding':'5px 20px',
                                'left': '630px',
                            },
                            'draftsLoadButton': {
                                'padding': '5px 20px',
                                'left': '760px',
                            }
                        },
                        'kr': {
                            'languageToggleButton': {
                                'padding': '4.5px 8px',  // í•œê¸€ì€ í…ìŠ¤íŠ¸ê°€ ê¸¸ì–´ì§€ë¯€ë¡œ íŒ¨ë”©ì„ ì¤„ì„
                                'left': '700px',  // ìœ„ì¹˜ ì•½ê°„ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
                            },
                            'customizeButton': {
                                'padding': '5px 20px',
                                'left': '20px',  // í•œêµ­ì–´ì¼ ë•Œ ì™¼ìª½ ìœ„ì¹˜ ì¡°ì •
                            },
                            'saveButton': {
                                'padding': '5px 20px',
                                'left': '160px',
                            },
                            'imageButton': {
                                'padding': '5px 20px',
                                'left': '300px',
                            },
                            'resetButton': {
                                'padding': '5px 20px',
                                'left': '457px',
                            },
                            'loadButton': {
                                'padding': '5px 20px',
                                'left': '560px',
                            },
                            'draftsSaveButton' :{
                                'padding': '5px 20px',
                                'left': '750px',
                            },
                            'draftsLoadButton':{
                                'padding': '5px 20px',
                                'left': '900px',
                            }
                        }
                    };

                    const buttonStyles = buttonStyleChanges[language];

                    // â“ ë²„íŠ¼(ì–¸ì–´ ì „í™˜ ë²„íŠ¼)ì— ì ìš©
                    languageToggleButton.style.padding = buttonStyles.languageToggleButton.padding;
                    languageToggleButton.style.left = buttonStyles.languageToggleButton.left;

                    // ë‹¤ë¥¸ ë²„íŠ¼ë“¤ì˜ ìŠ¤íƒ€ì¼ ì ìš©
                    document.getElementById('customizeButton').style.padding = buttonStyles.customizeButton.padding;
                    document.getElementById('customizeButton').style.left = buttonStyles.customizeButton.left;

                    document.getElementById('saveButton').style.padding = buttonStyles.saveButton.padding;
                    document.getElementById('saveButton').style.left = buttonStyles.saveButton.left;

                    document.getElementById('imageButton').style.padding = buttonStyles.imageButton.padding;
                    document.getElementById('imageButton').style.left = buttonStyles.imageButton.left;

                    document.getElementById('resetButton').style.padding = buttonStyles.resetButton.padding;
                    document.getElementById('resetButton').style.left = buttonStyles.resetButton.left;

                    document.getElementById('loadButton').style.padding = buttonStyles.loadButton.padding;
                    document.getElementById('loadButton').style.left = buttonStyles.loadButton.left;

                    document.getElementById('draftsSaveButton').style.padding =buttonStyles.draftsSaveButton.padding;
                    document.getElementById('draftsSaveButton').style.left = buttonStyles.draftsSaveButton.left;

                    document.getElementById('draftsLoadButton').style.padding =buttonStyles.draftsLoadButton.padding;
                    document.getElementById('draftsLoadButton').style.left = buttonStyles.draftsLoadButton.left;
                }
            // ë¼ë””ì˜¤ ë²„íŠ¼ ì„ íƒì— ë”°ë¥¸ ëª¨ë¸ ì„ íƒ ë³€ê²½
            document.querySelectorAll('input[name="modelSelect"]').forEach((radio) => {
                radio.addEventListener('change', function(event) {
                    selectedModel = event.target.value;  // ì„ íƒëœ ëª¨ë¸ ì—…ë°ì´íŠ¸
                });
            });
            

            function onWindowResize() {
                // ì¹´ë©”ë¼ì™€ ë Œë”ëŸ¬ í¬ê¸° ì—…ë°ì´íŠ¸
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);

                // ëª¨ë¸ í¬ê¸° ë¹„ìœ¨ì— ë§ê²Œ ì¡°ì •
                const scaleFactor = window.innerWidth / window.innerHeight;  // í™”ë©´ ë¹„ìœ¨ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë¸ í¬ê¸° ë³€ê²½

                if (model) {
                    model.scale.set(scaleFactor * 6, scaleFactor * 6, scaleFactor * 6); // ëª¨ë¸ í¬ê¸° ì¡°ì •
                }
                if (model2) {
                    model2.scale.set(scaleFactor * 6, scaleFactor * 6, scaleFactor * 6); // ëª¨ë¸ í¬ê¸° ì¡°ì •
                }
            }


            function init() {
                scene = new THREE.Scene();
                const textureLoader = new THREE.TextureLoader();
                const backgroundTexture = textureLoader.load('bg2.jpg');
                scene.background = backgroundTexture;


                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                camera.position.set(0, 0, 4);

                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(renderer.domElement);

                const light = new THREE.HemisphereLight(0xffffff, 0x444444);
                light.position.set(0, 20, 0);
                scene.add(light);

                const directionalLight = new THREE.DirectionalLight(0xffffff);
                directionalLight.position.set(0, 20, 10);
                scene.add(directionalLight);

                // ì²« ë²ˆì§¸ ëª¨ë¸ ë¡œë“œ
                const loader = new THREE.GLTFLoader();
                loader.load('t_shirt/scene2.glb', function (gltf) {
                    model = gltf.scene;
                    model.scale.set(6, 6, 6);
                    const box = new THREE.Box3().setFromObject(model);
                    const center = box.getCenter(new THREE.Vector3());
                    model.position.sub(center);
                    model.position.x = -2.5;
                    model.position.y = 0;
                    scene.add(model);
                }, undefined, function (error) {
                    console.error(error);
                });
                // ë‘ ë²ˆì§¸ ëª¨ë¸ ë¡œë“œ
                const loader2 = new THREE.GLTFLoader();
                loader.load('t_shirt/scene4.glb', function (gltf) {
                    model2 = gltf.scene;
                    model2.scale.set(6, 6, 6);
                    const box = new THREE.Box3().setFromObject(model2);
                    const center = box.getCenter(new THREE.Vector3());
                    model2.position.sub(center); 
                    model2.position.x = 2.5;
                    model2.position.y = 0;
                    model2.position.z = 0; // ëª¨ë¸ì˜ zì¶• ìœ„ì¹˜ ê¸°ë³¸ê°’ìœ¼ë¡œ ìœ ì§€í•´ì•¼í•¨!
                    model2.rotation.y = Math.PI; // !!!yì¶• ê¸°ì¤€ìœ¼ë¡œ 180ë„ íšŒì „ì‹œì¼œì„œ ë’·ë©´ ë³´ì´ê²Œí•¨!!!
                    scene.add(model2);
                }, undefined, function (error) {
                    console.error(error);
                });

                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableRotate = false;  // ì¹´ë©”ë¼ íšŒì „ ê¸ˆì§€
                controls.enableZoom = false;    // ì¤Œ ê¸ˆì§€
                controls.enablePan = false;     // íŒ¬(ì´ë™) ê¸ˆì§€
                controls.enableDamping = true;
                controls.dampingFactor = 0.25;
                controls.screenSpacePanning = false;
                controls.maxPolarAngle = Math.PI / 2;
                window.addEventListener('resize', onWindowResize, false);
            }

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }

            function animate() {
                requestAnimationFrame(animate);

                // ë§ˆìš°ìŠ¤ì— ë”°ë¼ ì„ íƒëœ ëª¨ë¸ íšŒì „
                const targetModel = selectedModel === 'model1' ? model : model2;
                if (targetModel) {
                    if (selectedModel === 'model2') {
                        targetModel.rotation.y = Math.PI + (mouseX * Math.PI / 10); //yì¶•
                        targetModel.rotation.x = -mouseY * Math.PI / 10; //xì¶•
                    } else {
                        targetModel.rotation.y = mouseX * Math.PI / 10;  // Yì¶• íšŒì „
                        targetModel.rotation.x = -mouseY * Math.PI / 10; // Xì¶• íšŒì „
                    }
                }
                controls.update();
                renderer.render(scene, camera);
            }
    document.getElementById('draftsSaveButton').addEventListener('click', function() {
        savedModelState = {
            model1: {
                color: model ? getModelColor(model) : null,
                texture: currentTexture1,
                material: model ? getModelMaterial(model) : null // ì¬ì§ˆ ì¶”ê°€
            },
            model2: {
                color: model2 ? getModelColor(model2) : null,
                texture: currentTexture2,
                material: model2 ? getModelMaterial(model2) : null // ì¬ì§ˆ ì¶”ê°€
            }
        };
        alert("ëª¨ë¸ ìƒíƒœê°€ ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    });

    document.getElementById('draftsLoadButton').addEventListener('click', function() {
        if (savedModelState && (savedModelState.model1.color || savedModelState.model2.color)) {
            applyModelState(savedModelState);
            alert("ì„ì‹œ ì €ì¥ëœ ëª¨ë¸ ìƒíƒœê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            alert("ì„ì‹œ ì €ì¥ëœ ìƒíƒœê°€ ì—†ìŠµë‹ˆë‹¤.");
        }
    });

    // ëª¨ë¸ì˜ ìƒ‰ìƒ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
    function getModelColor(targetModel) {
        let color = null;
        targetModel.traverse(function(child) {
            if (child.isMesh && child.material) {
                color = child.material.color.getStyle();
            }
        });
        return color;
    }
    function getModelMaterial(targetModel) {
        let material = null;
        targetModel.traverse(function(child) {
            if (child.isMesh && child.material) {
                material = {
                    roughness: child.material.roughness,
                    metalness: child.material.metalness
                };
            }
        });
        return material;
    }

    function applyModelState(state) {
        // !!!!!!!! model1 ì ìš© !!!!!!!!
        if (state.model1.color && model) {
            model.traverse(function(child) {
                if (child.isMesh && child.material) {
                    child.material.color.setStyle(state.model1.color);
                    child.material.needsUpdate = true;
                }
            });
        }
        if (state.model1.texture && model) {
            applyTextureToModel(model, state.model1.texture);
        }
        if (state.model1.material && model) {
            applyMaterialToModel(model, state.model1.material);
        }

        // !!!!!!!! model2 ì ìš© !!!!!!!!
        if (state.model2.color && model2) {
            model2.traverse(function(child) {
                if (child.isMesh && child.material) {
                    child.material.color.setStyle(state.model2.color);
                    child.material.needsUpdate = true;
                }
            });
        }
        if (state.model2.texture && model2) {
            applyTextureToModel(model2, state.model2.texture);
        }
        if (state.model2.material && model2) {
            applyMaterialToModel(model2, state.model2.material);
        }
    }

    function applyTextureToModel(targetModel, texture) {
        const newTexture = texture.clone();
        targetModel.traverse(function(child) {
            if (child.isMesh && child.material) {
                const newMaterial = new THREE.MeshStandardMaterial({
                    map: newTexture,
                    color: child.material.color,
                    roughness: child.material.roughness,
                    metalness: child.material.metalness,
                });
                child.material = newMaterial;
                child.material.needsUpdate = true;
            }
        });
    }
    function applyMaterialToModel(targetModel, material) {
        targetModel.traverse(function(child) {
            if (child.isMesh && child.material) {
                child.material.roughness = material.roughness;
                child.material.metalness = material.metalness;
                child.material.needsUpdate = true;
            }
        });
    }


            init();
            animate();

            // ë§ˆìš°ìŠ¤ ì´ë™ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.addEventListener('mousemove', onDocumentMouseMove, false);

            function onDocumentMouseMove(event) {
                // ë§ˆìš°ìŠ¤ ìœ„ì¹˜ë¥¼ ìº¡ì²˜ (ì¤‘ì•™ì„ ê¸°ì¤€ìœ¼ë¡œ X, Y ì¢Œí‘œ ê³„ì‚°)
                mouseX = (event.clientX - windowHalfX) / windowHalfX;
                mouseY = (event.clientY - windowHalfY) / windowHalfY;
            }

            moveButtonControl.addEventListener('mousedown', function(event) {
            isDragging = true;

                // ë“œë˜ê·¸ ì‹œì‘ ì‹œ í˜„ì¬ ì˜¤í”„ì…‹ ì €ì¥
                if (currentTexture1) {
                    initialOffset.x = currentTexture1.offset.x;
                    initialOffset.y = currentTexture1.offset.y;
                }

                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            });

            function onMouseMove(event) {
                if (isDragging) {
                    const moveControlsRect = moveControls.getBoundingClientRect();
                    const x = event.clientX - moveControlsRect.left - moveButtonControl.clientWidth / 2;
                    const y = event.clientY - moveControlsRect.top - moveButtonControl.clientHeight / 2;

                    // ë²„íŠ¼ ìœ„ì¹˜ ì œí•œ
                    moveButtonControl.style.left = Math.max(0, Math.min(moveControlsRect.width - moveButtonControl.clientWidth, x)) + 'px';
                    moveButtonControl.style.top = Math.max(0, Math.min(moveControlsRect.height - moveButtonControl.clientHeight, y)) + 'px';

                    const centerX = moveControlsRect.width / 2;
                    const centerY = moveControlsRect.height / 2;

                    // ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì—¬ ì¢Œìš°ì™€ ìƒí•˜ë¥¼ ë’¤ì§‘ìŒ
                    const offsetX = (centerX - x) / centerX; // Xì¶• ë°˜ì „
                    const offsetY = (centerY - y) / centerY; // Yì¶• ë°˜ì „

                    // ë‘ ëª¨ë¸ì˜ ì˜¤í”„ì…‹ì„ ë™ì‹œì— ì—…ë°ì´íŠ¸
                    if (currentTexture1) {
                        currentTexture1.offset.x = initialOffset.x + offsetX * 0.5; // ìŠ¤ì¼€ì¼ ì¡°ì •
                        currentTexture1.offset.y = initialOffset.y + offsetY * 0.5; // ìŠ¤ì¼€ì¼ ì¡°ì •
                        currentTexture1.needsUpdate = true;
                    }

                    if (currentTexture2) {
                        currentTexture2.offset.x = initialOffset.x + offsetX * 0.5; // ìŠ¤ì¼€ì¼ ì¡°ì •
                        currentTexture2.offset.y = initialOffset.y + offsetY * 0.5; // ìŠ¤ì¼€ì¼ ì¡°ì •
                        currentTexture2.needsUpdate = true;
                    }
                }
            }

            function onMouseUp() {
                isDragging = false;
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);

                // ë“œë˜ê·¸ë¥¼ ë©ˆì¶”ë©´ ë²„íŠ¼ì„ ì›ë˜ ìœ„ì¹˜ë¡œ ë³µì›
                moveButtonControl.style.left = '60px'; // ì´ˆê¸° ìœ„ì¹˜ë¡œ ì„¤ì •
                moveButtonControl.style.top = '60px';  // ì´ˆê¸° ìœ„ì¹˜ë¡œ ì„¤ì •

                // ë²„íŠ¼ ìƒ‰ìƒ ë³µì›
                moveButtonControl.style.backgroundColor = '#007BFF';
            }



        </script>
    </body>
    </html>